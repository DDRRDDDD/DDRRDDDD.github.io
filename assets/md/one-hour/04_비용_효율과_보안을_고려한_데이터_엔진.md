#### ğŸš¨ ì§ë©´í–ˆë˜ ê³¼ì œ
> **"ë¹„ìš© íš¨ìœ¨ì„±ê³¼ ì •êµí•œ ë°ì´í„° ê´€ë¦¬ë¥¼ ë™ì‹œì— ì¡ì•„ì•¼ í•œë‹¤"**
> * **ë‹¨ìˆœ ë°ì´í„° êµ¬ì¡°ì˜ í•œê³„**: ë‹¨ìˆœíˆ ë©”ì‹œì§€ í…ìŠ¤íŠ¸ë§Œ ì €ì¥í•˜ëŠ” ë°©ì‹ìœ¼ë¡œëŠ”, **ëˆ„ê°€ ì–¸ì œ ì…ì¥í–ˆê³  ë‚˜ê°”ëŠ”ì§€**ì— ëŒ€í•œ ì •í™•í•œ ì‹œì ì„ ì•Œ ìˆ˜ ì—†ì–´ ì •êµí•œ í•„í„°ë§ êµ¬í˜„ì´ ë¶ˆê°€ëŠ¥í–ˆìŠµë‹ˆë‹¤.
> * **N+1 ë¹„ìš© ë¬¸ì œ**: ì‚¬ìš©ìê°€ ì†í•œ ì±„íŒ…ë°© ê°œìˆ˜ë§Œí¼ ìŠ¤íŠ¸ë¦¼ì„ ì—°ê²°í•˜ë©´ **Firebase ì½ê¸° ë¹„ìš©ê³¼ ë¦¬ì†ŒìŠ¤ ì†Œëª¨ê°€ ê¸°í•˜ê¸‰ìˆ˜ì ìœ¼ë¡œ í­ì¦**í•˜ëŠ” êµ¬ì¡°ì  í•œê³„ê°€ ìˆì—ˆìŠµë‹ˆë‹¤.

#### ğŸ›  ë¬¸ì œ í•´ê²° ë° êµ¬í˜„ ê³¼ì •
> **ğŸ’¡ ì´ë²¤íŠ¸ ì†Œì‹± ëª¨ë¸ë§ê³¼ ë‹¨ì¼ íŒŒì´í”„ë¼ì¸ ìµœì í™”**
> * **ì´ë²¤íŠ¸ ê¸°ë°˜ ë°ì´í„° ëª¨ë¸ë§**: ì±„íŒ…ë°© ë‚´ì˜ ëª¨ë“  ìƒíƒœ ë³€í™”ë¥¼ ë‹¨ìˆœ í…ìŠ¤íŠ¸ê°€ ì•„ë‹Œ `ëŒ€í™”`, `ì…ì¥`, `í‡´ì¥` ë“± **ChatEvent**ë¡œ ì •ì˜í•˜ì—¬ í†µí•© ê´€ë¦¬í–ˆìŠµë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ì±„íŒ…ì˜ ì „í›„ ë§¥ë½ì„ ì¶”ì í•  ìˆ˜ ìˆëŠ” êµ¬ì¡°ë¥¼ ë§ˆë ¨í–ˆìŠµë‹ˆë‹¤.
> * **ë©”ëª¨ë¦¬ ë ˆë²¨ì˜ í•„í„°ë§**: ì•ì„œ ì •ì˜í•œ `ì…ì¥` ì´ë²¤íŠ¸ë¥¼ ê¸°ì¤€ì ìœ¼ë¡œ í™œìš©í•˜ì—¬, ì§ì ‘ êµ¬í˜„í•œ `takeUntilMemberJoins`ë¥¼ í†µí•´ **ì…ì¥ ì‹œì  ì´ì „ì˜ ë°ì´í„°ë¥¼ í´ë¼ì´ì–¸íŠ¸ ë©”ëª¨ë¦¬ ë‹¨ì—ì„œ ì›ì²œ ì°¨ë‹¨**í•˜ëŠ” í•˜ì´ë¸Œë¦¬ë“œ ë³´ì•ˆ ë¡œì§ì„ ì™„ì„±í–ˆìŠµë‹ˆë‹¤.
> * **ë‹¨ì¼ êµ¬ë… ìµœì í™”**: `collectionGroup`ì™€ `array-contains` ì¿¼ë¦¬ë¥¼ í™œìš©í•´ ë‹¨ í•˜ë‚˜ì˜ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ ë‚´ê°€ ì†í•œ ëª¨ë“  ì±„íŒ…ë°©ì˜ ì´ë²¤íŠ¸ë¥¼ ìˆ˜ì‹ í•˜ë©°, ì½ê¸° ë¹„ìš©ì„ ì¤„ì˜€ìŠµë‹ˆë‹¤.

```dart
// ì‚¬ìš©ìê°€ ì°¸ì—¬ ì¤‘ì¸ ëª¨ë“  ì±„íŒ…ë°©ì˜ ì‹¤ì‹œê°„ ì´ë²¤íŠ¸ë¥¼ ë‹¨ì¼ ìŠ¤íŠ¸ë¦¼ìœ¼ë¡œ êµ¬ë…í•©ë‹ˆë‹¤.
Stream<ChatEvent> watchAllChatEvent(String myUid) {
  return _firestore
      .collectionGroup('chat_event')
      .where('member_id', arrayContains: myUid)
      .orderBy('created_at', descending: true)
      .limit(1)
      .snapshots()
      .map((snapshot) => ChatEvent.fromJson(snapshot.docs.first.dataWithDocId()));
}
```
```dart
// ì§€ì •í•œ ë©¤ë²„ì˜ `join` ì´ë²¤íŠ¸ê°€ ë‚˜ì˜¤ê¸° ì „ê¹Œì§€ì˜ `ChatEvent`ë“¤ì„ ìˆœì°¨ì ìœ¼ë¡œ ë°˜í™˜í•˜ëŠ” í™•ì¥ í•¨ìˆ˜ì…ë‹ˆë‹¤.
extension ChatEventIterableX on Iterable<ChatEvent> {
  Iterable<ChatEvent> takeUntilMemberJoins(String memberId) sync* {
    for (final ChatEvent chatEvent in this) {
      yield chatEvent;
      if (chatEvent.memberId == memberId &&
          chatEvent.chatEventType == ChatEventType.join) {
        break;
      }
    }
  }
}
```